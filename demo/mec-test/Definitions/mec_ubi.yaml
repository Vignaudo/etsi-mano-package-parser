#
#
#
#
tosca_definitions_version: tosca_simple_yaml_1_0
metadata:
  template_name: etsi_mec_sol001_types
  template_author: UBIQUBE_MEC
  template_version: 2.1.1

description: >
  Sample NSD for integration testing.

imports:
  - TOSCA_mec_definition_1_0_1.yaml


topology_template:
  node_templates:

    mea01:
      type: tosca.nodes.mec.MEA
      properties: 
        appd_id: 6a505d40-bf04-4fb5-b3fe-9fadfd96a18b
        app_provider: UBIQUBE
        app_name: meo-test
        app_soft_version: 1.0.0
        appd_version: 1.0.1
        mec_version:
          - 1.0.0
          - 1.2.0
        app_info_name: info name
        app_description: description.
        app_matency: 1
        virtual_compute_descriptor:
          sw_image_data:
            name: cirros
            version: 1.0.0
            checksum:
              hash: 01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b
              algorithm: SHA-256
            container_format: BARE
            disk_format: QCOW2
            min_disk: 1 GiB
            min_ram: 512 Mib
            operating_system: centos8
          monitoring_parameters: # tosca.datatypes.nfv.VnfMonitoringParameter
            - name: metric name
              performance_metric: v_cpu_usage_mean_vnf
              collection_period: 60 s
        optional_feature_dependencies:
          - name: fd 01
            version: v1
          - name: fd 02
            version: v9
        required_feature_dependencies:
          - name: rfd 01
            version: v8
          - name: rfd 02
            version: v7
        # terminateAppInstanceOpConfig:
        # changeAppInstanceStateOpConfig:
      requirements:
        - virtual_storage: block01
      capabilities:
        virtual_compute:
          properties:
            logical_node:  # map tosca.datatypes.nfv.LogicalNodeData
              key:
                logical_node_requirements:
                  map: string
            requested_additional_capabilities: # map tosca.datatypes.nfv.RequestedAdditionalCapability
              name:
                requested_additional_capability_name:  name02
                support_mandatory: false
                min_requested_additional_capability_version: 0.0.1
                preferred_requested_additional_capability_version: 0.0.2
                target_performance_parameters:
                  map: string
            compute_requirements: # map string
              req: requirement
            virtual_memory: # tosca.datatypes.nfv.VirtualMemory
              properties:
                virtual_mem_size: 512 MiB
                virtual_mem_oversubscription_policy: what
                vdu_mem_requirements:
                  read: openstack
                numa_enabled: true
            virtual_cpu: # tosca.datatypes.nfv.VirtualCpu
              properties:
                cpu_architecture: x86_64
                num_virtual_cpu: 1
                virtual_cpu_clock: 3 GHz
                vdu_cpu_requirements: # map string
                  read: openstack
                virtual_cpu_pinning: # tosca.datatypes.nfv.VirtualCpuPinning
                  virtual_cpu_pinning_policy: static
                  virtual_cpu_pinning_rule:
                    - rule0
                    - rule1
            virtual_local_storage: # list tosca.datatypes.nfv.VirtualBlockStorageData
              - size_of_storage: 512 mb
                vdu_storage_requirements: # map string
                  read: openstack
                rdma_enabled: false




policies:
  app_service_produced_01:
    type: tosca.policies.mec.AppServiceProduced
    properties:
      ser_name: serName
      ser_category: cat01
      version: 3.2.1
      transports_supported: # type: tosca.datatypes.mec.TransportsSupported
        transport: # type: tosca.datatypes.mec.TransportDescriptor
          type: MB_PUBSUB
          protocol: tcp
          version: 2.3.4
        serializers:
          - ser01
          - ser02


  dns01:
    type: tosca.policies.mec.DnsRuleDescriptor
    properties:
      id: id
      domain_name: my.domain.com
      ip_address: 1.2.3.4
      ip_address_type: ipv4
      ttl: 3600


  






  sr01:
    type: tosca.policies.mec.AppServiceRequired
    properties:
      ser_name: serName01
      ser_category: serCath01
      version: 1.0.0
      ser_transport_dependencies: # tosca.datatypes.mec.TransportsDependency
        - transport: # type: tosca.datatypes.mec.TransportDescriptor
            type: REST_HTTP
            protocol: HTTP
            version: 1.2.3
            #security: #type: tosca.datatypes.mec.SecurityInfo
          serializers:
            - ser01
            - ser02
          labels: # list of type: tosca.datatypes.mec.TransportsDependency
            - lab01
            - lab02
      requested_permissions:

  so01:
    type: tosca.policies.mec.AppServiceOptional
    properties:
      ser_name: serName01
      ser_category: serCath01
      version: 1.0.0
      ser_transport_dependencies: # tosca.datatypes.mec.TransportsDependency
        - transport: # type: tosca.datatypes.mec.TransportDescriptor
            type: REST_HTTP
            protocol: HTTP
            version: 1.2.3
            #security: #type: tosca.datatypes.mec.SecurityInfo
          serializers:
            - ser01
            - ser02
          labels: # list of type: tosca.datatypes.mec.TransportsDependency
            - lab01
            - lab02
      requested_permissions:
